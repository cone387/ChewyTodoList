# 已完成任务显示功能 & 三层模板架构

## 功能概述

在任务管理页面顶部导航栏右侧新增了三个功能按钮：

### 1. 任务卡片样式选择按钮 ⭐ 新增

**位置**：顶部导航栏右侧第一个按钮

**图标**：style（样式图标）

**功能**：
- 点击弹出底部抽屉式选择器
- 显示所有可用的任务卡片样式模板
- 每个模板显示名称、描述、图标和特性标签
- 当前使用的模板高亮显示（带对勾）
- 点击模板可切换任务卡片样式

**可用卡片样式**：
1. **默认卡片**：简洁实用的标准样式
2. **极简卡片**：最小化信息，专注任务本身
3. **详细卡片**：显示完整的任务信息
4. **看板卡片**：适合看板视图的紧凑样式
5. **彩色卡片**：使用颜色突出优先级和状态
6. **时间线卡片**：强调时间信息的卡片样式

### 2. 视图类型选择按钮

**位置**：顶部导航栏右侧第二个按钮

**图标**：view_module（视图模块图标）

**功能**：
- 点击弹出底部抽屉式选择器
- 显示所有可用的视图类型：
  - 列表视图
  - 看板视图
  - 日历视图
  - 表格视图
  - 时间线视图
  - 画廊视图
- 当前使用的类型高亮显示
- 点击类型可切换视图布局（待实现后端支持）

### 3. 已完成任务显示/隐藏按钮

**位置**：顶部导航栏右侧第三个按钮

**图标**：check_circle / radio_button_unchecked

**功能**：
- 默认状态：隐藏已完成任务（按钮显示为空心圆圈图标）
- 点击后：显示已完成任务（按钮变为绿色实心对勾图标）
- 已完成任务显示在页面底部的可折叠分组中

**已完成任务分组特性**：
- 显示在所有未完成任务下方
- 默认折叠状态，需要点击展开
- 绿色主题样式，与未完成任务区分
- 显示已完成任务数量
- 任务显示为半透明，标题带删除线
- 可以点击任务取消完成状态

## 技术实现

### 修改的文件

1. **frontend/src/types/taskCard.ts**（新增）
   - 定义任务卡片模板类型
   - 包含6种预设卡片样式
   - 详细的样式配置选项

2. **frontend/src/components/Header.tsx**
   - 添加 `showCompleted`、`onToggleCompleted`、`onSelectTemplate`、`onSelectTaskCard` 属性
   - 新增三个功能按钮的 UI
   - 按钮顺序：任务卡片 → 视图类型 → 已完成任务

3. **frontend/src/components/EnhancedTaskList.tsx**
   - 添加 `showCompleted` 属性
   - 分离已完成和未完成任务
   - 只对未完成任务进行分组
   - 添加可折叠的已完成任务分组

4. **frontend/src/components/ViewRenderer.tsx**
   - 添加 `showCompleted` 属性并传递给子组件

5. **frontend/src/pages/HomePage.tsx**
   - 添加 `showCompleted`、`showTemplateSelector`、`showTaskCardSelector`、`selectedTaskCard` 状态
   - 实现切换逻辑
   - 添加视图类型选择器 UI
   - 添加任务卡片选择器 UI（新增）
   - 导入任务卡片模板数据

## 用户体验

### 三层架构的使用流程

1. **选择视图**：在顶部标签栏切换不同的视图（今日任务、高优先级等）
2. **选择类型**：点击"视图类型"按钮，选择展示格局（列表、看板、日历等）
3. **选择卡片**：点击"任务卡片"按钮，选择任务展示样式（默认、极简、详细等）
4. **控制完成**：点击"已完成任务"按钮，显示或隐藏已完成的任务

### 已完成任务管理
- 默认隐藏已完成任务，保持界面简洁
- 需要查看时一键显示
- 已完成任务折叠显示，不干扰主要工作流
- 可以快速取消完成状态

### 视图类型切换
- 直观的图标展示
- 当前类型高亮提示
- 底部抽屉式交互，不遮挡主要内容
- 支持快速切换不同视图类型

### 任务卡片切换 ⭐ 新增
- 6种预设卡片样式可选
- 每个样式都有详细说明和特性标签
- 当前样式高亮显示（带对勾）
- 实时预览样式特点
- 底部提示说明卡片样式的作用范围

## 后续优化建议

1. **实现任务卡片样式应用**
   - 根据选择的卡片模板动态调整任务展示
   - 应用卡片样式配置到 EnhancedTaskList 组件
   - 保存用户的卡片样式偏好

2. **实现视图类型切换的后端 API 调用**
   - 支持动态切换视图类型
   - 保存视图类型到视图配置中

3. **添加切换动画效果**
   - 卡片样式切换时的过渡动画
   - 视图类型切换时的淡入淡出

4. **保存用户的显示偏好设置**
   - 记住用户选择的卡片样式
   - 记住已完成任务的显示状态
   - 跨设备同步偏好设置

5. **支持自定义卡片样式**
   - 卡片样式编辑器
   - 自定义配色方案
   - 导入/导出卡片样式

6. **添加卡片样式预览功能**
   - 在选择器中显示实际的任务卡片预览
   - 支持实时预览不同样式的效果

7. **建立三个广场**
   - 视图广场：分享和下载视图模板
   - 类型广场：更多视图类型（思维导图、甘特图等）
   - 卡片广场：社区分享的卡片样式

## 三层架构总结

### 视图（View）- 控制"看什么"
- 定义筛选条件
- 定义排序规则
- 定义分组方式
- 入口：视图管理页面、视图市场

### 视图类型（View Type）- 控制"怎么看"
- 定义任务的整体布局
- 列表、看板、日历、表格、时间线、画廊
- 入口：顶部导航栏"视图类型"按钮

### 任务卡片（Task Card）- 控制"看多细"
- 定义单个任务的展示样式
- 默认、极简、详细、看板、彩色、时间线
- 入口：顶部导航栏"任务卡片"按钮

这种三层架构提供了强大而灵活的自定义能力，让用户可以根据不同的工作场景和个人偏好，自由组合出最适合自己的任务管理界面。
