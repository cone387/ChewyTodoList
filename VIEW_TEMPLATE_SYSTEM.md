# 视图模板系统

## 概述

视图模板系统为用户提供了丰富的任务呈现方式，包括多种预设模板和自定义视图创建功能。用户可以从模板市场选择适合的模板，快速创建个性化的任务视图。

## 功能特性

### 🎯 多种视图类型

1. **列表视图 (List)** - 传统的任务列表展示
2. **看板视图 (Board)** - 按状态分组的卡片式看板
3. **日历视图 (Calendar)** - 按日期展示任务的日历界面
4. **表格视图 (Table)** - 结构化的表格数据展示
5. **时间轴视图 (Timeline)** - 按时间顺序的时间轴展示
6. **画廊视图 (Gallery)** - 卡片式的视觉化展示

### 📚 模板市场

#### 生产力模板
- **今日专注** - 专注今天最重要的任务
- **GTD 工作流** - 基于 Getting Things Done 方法论
- **四象限法则** - 按重要性和紧急性分类

#### 项目管理模板
- **项目时间轴** - 以时间轴形式展示项目进度
- **敏捷冲刺看板** - 敏捷开发团队的冲刺管理
- **里程碑追踪** - 追踪项目重要里程碑

#### 个人管理模板
- **周回顾** - 回顾本周完成的任务和计划
- **习惯追踪** - 追踪日常习惯和重复任务

#### 团队协作模板
- **团队仪表板** - 团队任务分配和进度概览

#### 创意定制模板
- **创意画廊** - 以画廊形式展示创意任务

### 🔧 高级配置

#### 筛选条件
- 支持多种操作符：等于、包含、大于、小于等
- 时间相关筛选：今天、本周、本月、逾期等
- 逻辑组合：AND/OR 逻辑连接

#### 排序规则
- 多字段排序支持
- 升序/降序选择
- 优先级、日期、状态等字段排序

#### 分组设置
- 按状态、优先级、项目、标签分组
- 支持空分组显示/隐藏
- 分组折叠功能

#### 显示设置
- 字段显示控制：项目、标签、日期、优先级等
- 紧凑模式切换
- 卡片大小调整（小、中、大）

### 🎨 视觉化特性

#### 看板视图
- 彩色列标题区分不同状态
- 拖拽排序支持
- 泳道分组显示

#### 日历视图
- 月视图展示
- 今天高亮显示
- 任务优先级颜色编码
- 任务统计信息

#### 时间轴视图
- 时间节点可视化
- 优先级指示点
- 过期任务特殊标记
- 里程碑展示

#### 画廊视图
- 渐变背景卡片
- 图标装饰
- 多种卡片尺寸
- 视觉化进度展示

## 使用指南

### 1. 访问模板市场
- 在视图管理页面点击"模板市场"按钮
- 浏览不同分类的模板
- 使用搜索功能查找特定模板

### 2. 预览模板
- 点击"预览"按钮查看模板详情
- 查看配置信息和适用场景
- 了解筛选条件和排序规则

### 3. 使用模板
- 点击"使用模板"创建视图副本
- 系统自动生成唯一名称
- 可在"我的视图"中进一步编辑

### 4. 自定义视图
- 点击"创建视图"按钮
- 选择视图类型和配置选项
- 设置筛选、排序和显示规则

## 技术实现

### 文件结构
```
frontend/src/
├── types/
│   └── templates.ts          # 模板类型定义
├── data/
│   └── viewTemplates.ts      # 预设模板数据
├── pages/
│   ├── ViewTemplateMarketPage.tsx    # 模板市场页面
│   └── ViewTemplatePreviewPage.tsx   # 模板预览页面
├── components/
│   ├── ViewRenderer.tsx      # 视图渲染器
│   ├── KanbanBoard.tsx       # 看板视图组件
│   ├── CalendarView.tsx      # 日历视图组件
│   ├── TableView.tsx         # 表格视图组件
│   ├── TimelineView.tsx      # 时间轴视图组件
│   ├── GalleryView.tsx       # 画廊视图组件
│   └── TemplateCard.tsx      # 模板卡片组件
```

### 核心组件

#### ViewRenderer
统一的视图渲染器，根据视图类型动态加载对应的组件：
- 支持所有视图类型的渲染
- 统一的接口和数据传递
- 加载状态处理

#### 视图组件
每种视图类型都有独立的组件实现：
- 响应式设计适配移动端
- 统一的交互模式
- 可配置的显示选项

### 数据结构

#### ViewTemplate
```typescript
interface ViewTemplate {
  id: string;
  name: string;
  description: string;
  category: 'productivity' | 'project' | 'personal' | 'team' | 'custom';
  icon: string;
  color: string;
  view_type: 'list' | 'board' | 'calendar' | 'table' | 'timeline' | 'gallery';
  filters: ViewFilter[];
  sorts: ViewSort[];
  group_by?: string;
  display_settings: ViewDisplaySettings;
  layout_settings?: ViewLayoutSettings;
  // ... 其他属性
}
```

## 扩展性

### 添加新模板
1. 在 `viewTemplates.ts` 中定义新模板
2. 设置合适的分类和标签
3. 配置筛选条件和显示设置

### 添加新视图类型
1. 创建新的视图组件
2. 在 `ViewRenderer` 中注册
3. 更新类型定义和选项

### 自定义布局设置
1. 扩展 `ViewLayoutSettings` 接口
2. 在对应视图组件中实现
3. 在创建视图页面添加配置选项

## 最佳实践

### 模板设计
- 明确的使用场景和目标用户
- 合理的默认配置
- 清晰的描述和标签

### 性能优化
- 虚拟滚动处理大量数据
- 懒加载非关键组件
- 缓存计算结果

### 用户体验
- 直观的视觉反馈
- 一致的交互模式
- 响应式设计适配

## 未来规划

### 短期目标
- [ ] 添加更多预设模板
- [ ] 实现模板评分和评论
- [ ] 支持模板分享和导入

### 长期目标
- [ ] 可视化模板编辑器
- [ ] 社区模板市场
- [ ] AI 推荐模板
- [ ] 自定义主题和样式

## 总结

视图模板系统为用户提供了灵活多样的任务管理方式，通过预设模板和自定义配置，满足不同场景下的使用需求。系统设计注重可扩展性和用户体验，为未来的功能扩展奠定了良好基础。