# 视图卡片模板选择功能

## 功能概述

在视图编辑页面添加了卡片模板选择功能，允许用户为不同的视图类型选择最适合的任务卡片样式。

## 功能特性

### 1. 卡片模板类型

系统提供6种预设卡片模板：

- **默认卡片** (default) - 简洁实用的默认样式，显示所有关键信息
- **极简卡片** (minimal) - 最小化信息，专注任务本身
- **详细卡片** (detailed) - 显示完整的任务信息，包含描述
- **看板卡片** (kanban) - 适合看板视图的紧凑样式
- **彩色卡片** (colorful) - 使用颜色突出优先级和状态
- **时间线卡片** (timeline) - 强调时间信息的卡片样式

### 2. 视图类型与卡片模板的级联关系

不同视图类型推荐不同的卡片模板：

#### 列表视图 (list)
推荐模板：默认卡片、极简卡片、详细卡片、彩色卡片、时间线卡片

#### 看板视图 (board)
推荐模板：看板卡片、默认卡片、极简卡片、彩色卡片

#### 日历视图 (calendar)
推荐模板：极简卡片、默认卡片、时间线卡片

#### 表格视图 (table)
推荐模板：极简卡片、默认卡片

#### 时间轴视图 (timeline)
推荐模板：时间线卡片、默认卡片、极简卡片

#### 画廊视图 (gallery)
推荐模板：详细卡片、彩色卡片、默认卡片

### 3. 智能切换

当用户切换视图类型时：
- 如果当前选择的卡片模板不在新视图类型的推荐列表中，系统会自动切换到该视图类型的第一个推荐模板
- 如果当前模板在推荐列表中，则保持不变

### 4. 卡片预览提示

选择卡片模板后，会显示：
- 模板名称
- 模板描述
- 蓝色提示框样式，清晰易读

## 数据结构

### 视图数据中的卡片模板字段

```typescript
{
  card_template_id: 'default', // 卡片模板ID
  display_settings: {
    card_template_id: 'default', // 也保存在display_settings中
    show_project: true,
    show_tags: true,
    // ... 其他显示设置
  }
}
```

### 卡片模板定义

每个卡片模板包含：
- id: 唯一标识符
- name: 模板名称
- description: 模板描述
- icon: Material Icons图标名
- preview: 预览描述
- style: 详细的样式配置对象

## UI设计

### 卡片样式选择器
- 使用MobileSelect组件，iOS风格的白色弹窗
- 显示所有可用的卡片模板
- 推荐的模板排在前面

### 预览提示框
- 蓝色背景的信息框
- 显示图标、模板名称和描述
- 帮助用户理解所选模板的特点

## 使用场景

1. **创建新视图时**
   - 选择视图类型后，系统自动推荐合适的卡片模板
   - 用户可以根据需要调整

2. **编辑现有视图时**
   - 保留原有的卡片模板选择
   - 可以随时更改

3. **切换视图类型时**
   - 智能判断是否需要切换卡片模板
   - 确保最佳的显示效果

## 技术实现

### 关键函数

```typescript
// 获取可用的卡片模板（按推荐顺序）
getAvailableCardTemplates()

// 处理视图类型变化，智能切换卡片模板
handleViewTypeChange(newViewType: string)
```

### 级联逻辑

```typescript
const templatesByViewType = {
  list: ['default', 'minimal', 'detailed', 'colorful', 'timeline'],
  board: ['kanban', 'default', 'minimal', 'colorful'],
  // ... 其他视图类型
};
```

## 后续优化建议

1. **卡片模板预览**
   - 添加实时预览功能
   - 显示模板的实际效果

2. **自定义卡片模板**
   - 允许用户创建自定义模板
   - 保存个人偏好设置

3. **模板市场**
   - 提供更多社区贡献的模板
   - 支持模板分享和下载

4. **智能推荐**
   - 根据用户使用习惯推荐模板
   - 学习用户偏好

## 相关文件

- `frontend/src/pages/CreateViewPage.tsx` - 视图编辑页面
- `frontend/src/types/taskCard.ts` - 卡片模板类型定义
- `frontend/src/components/MobileSelect.tsx` - 移动端选择器组件
